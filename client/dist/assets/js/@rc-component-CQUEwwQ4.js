import{c as w,f as lt,e as H,g as gr,h as Ft,_ as It,a as Rt,b as me}from"./@babel-Ci6hP7BZ.js";import{r as i}from"./react-DGs7XrPl.js";import{r as dt}from"./react-dom-CcpivLZ2.js";import{c as Hr,a as z,d as zt,u as Ht,r as gt,s as Vr,e as Tt,f as Te,i as st,h as Vt,j as yt,g as ct,k as qt,l as Gt,m as Ut,n as jt,o as Qt}from"./rc-util-Cnbt_QWE.js";import{c as rr}from"./classnames-lS_MG6Eb.js";import{R as _t}from"./rc-resize-observer-BhY2sIli.js";import{C as $t}from"./rc-motion-qgA4pb1i.js";var Lt=i.createContext(null),St=[];function Jt(e,t){var r=i.useState(function(){if(!Hr())return null;var y=document.createElement("div");return y}),n=w(r,1),a=n[0],o=i.useRef(!1),l=i.useContext(Lt),s=i.useState(St),m=w(s,2),c=m[0],g=m[1],v=l||(o.current?void 0:function(y){g(function(E){var P=[y].concat(lt(E));return P})});function S(){a.parentElement||document.body.appendChild(a),o.current=!0}function f(){var y;(y=a.parentElement)===null||y===void 0||y.removeChild(a),o.current=!1}return z(function(){return e?l?l(S):S():f(),f},[e]),z(function(){c.length&&(c.forEach(function(y){return y()}),g(St))},[c]),[a,v]}function Kt(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Zt="rc-util-locker-".concat(Date.now()),bt=0;function Xt(e){var t=!!e,r=i.useState(function(){return bt+=1,"".concat(Zt,"_").concat(bt)}),n=w(r,1),a=n[0];z(function(){if(t){var o=zt(document.body).width,l=Kt();Ht(`
html body {
  overflow-y: hidden;
  `.concat(l?"width: calc(100% - ".concat(o,"px);"):"",`
}`),a)}else gt(a);return function(){gt(a)}},[t,a])}var Yt=!1;function Ot(e){return Yt}var Nt=function(t){return t===!1?!1:!Hr()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},xt=i.forwardRef(function(e,t){var r=e.open,n=e.autoLock,a=e.getContainer;e.debug;var o=e.autoDestroy,l=o===void 0?!0:o,s=e.children,m=i.useState(r),c=w(m,2),g=c[0],v=c[1],S=g||r;i.useEffect(function(){(l||r)&&v(r)},[r,l]);var f=i.useState(function(){return Nt(a)}),y=w(f,2),E=y[0],P=y[1];i.useEffect(function(){var W=Nt(a);P(W??null)});var _=Jt(S&&!E),k=w(_,2),b=k[0],d=k[1],x=E??b;Xt(n&&r&&Hr()&&(x===b||x===document.body));var V=null;if(s&&Vr(s)&&t){var G=s;V=G.ref}var X=Tt(V,t);if(!S||!Hr()||E===void 0)return null;var p=x===!1||Ot(),B=s;return t&&(B=i.cloneElement(s,{ref:X})),i.createElement(Lt.Provider,{value:d},p?B:dt.createPortal(B,x))}),Ct=i.createContext(null);function Mt(e){return e?Array.isArray(e)?e:[e]:[]}function pt(e,t,r,n){return i.useMemo(function(){var a=Mt(r??t),o=Mt(n??t),l=new Set(a),s=new Set(o);return e&&(l.has("hover")&&(l.delete("hover"),l.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[l,s]},[e,t,r,n])}function en(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function rn(e,t,r,n){for(var a=r.points,o=Object.keys(e),l=0;l<o.length;l+=1){var s,m=o[l];if(en((s=e[m])===null||s===void 0?void 0:s.points,a,n))return"".concat(t,"-placement-").concat(m)}return""}function wt(e,t,r,n){return t||(r?{motionName:"".concat(e,"-").concat(r)}:n?{motionName:n}:null)}function br(e){return e.ownerDocument.defaultView}function vt(e){for(var t=[],r=e==null?void 0:e.parentElement,n=["hidden","scroll","clip","auto"];r;){var a=br(r).getComputedStyle(r),o=a.overflowX,l=a.overflowY,s=a.overflow;[o,l,s].some(function(m){return n.includes(m)})&&t.push(r),r=r.parentElement}return t}function Sr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function mr(e){return Sr(parseFloat(e),0)}function Et(e,t){var r=H({},e);return(t||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var a=br(n).getComputedStyle(n),o=a.overflow,l=a.overflowClipMargin,s=a.borderTopWidth,m=a.borderBottomWidth,c=a.borderLeftWidth,g=a.borderRightWidth,v=n.getBoundingClientRect(),S=n.offsetHeight,f=n.clientHeight,y=n.offsetWidth,E=n.clientWidth,P=mr(s),_=mr(m),k=mr(c),b=mr(g),d=Sr(Math.round(v.width/y*1e3)/1e3),x=Sr(Math.round(v.height/S*1e3)/1e3),V=(y-E-k-b)*d,G=(S-f-P-_)*x,X=P*x,p=_*x,B=k*d,W=b*d,he=0,ge=0;if(o==="clip"){var ue=mr(l);he=ue*d,ge=ue*x}var q=v.x+B-he,$=v.y+X-ge,N=q+v.width+2*he-B-W-V,U=$+v.height+2*ge-X-p-G;r.left=Math.max(r.left,q),r.top=Math.max(r.top,$),r.right=Math.min(r.right,N),r.bottom=Math.min(r.bottom,U)}}),r}function Pt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(t),n=r.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(r)}function kt(e,t){var r=t||[],n=w(r,2),a=n[0],o=n[1];return[Pt(e.width,a),Pt(e.height,o)]}function Dt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function er(e,t){var r=t[0],n=t[1],a,o;return r==="t"?o=e.y:r==="b"?o=e.y+e.height:o=e.y+e.height/2,n==="l"?a=e.x:n==="r"?a=e.x+e.width:a=e.x+e.width/2,{x:a,y:o}}function Re(e,t){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(n,a){return a===t?r[n]||"c":n}).join("")}function tn(e,t,r,n,a,o,l){var s=i.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[n]||{}}),m=w(s,2),c=m[0],g=m[1],v=i.useRef(0),S=i.useMemo(function(){return t?vt(t):[]},[t]),f=i.useRef({}),y=function(){f.current={}};e||y();var E=Te(function(){if(t&&r&&e){let O=function(Br,qe){var Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ke,dr=D.x+Br,pe=D.y+qe,Wr=dr+A,nt=pe+F,at=Math.max(dr,Ie.left),it=Math.max(pe,Ie.top),ot=Math.min(Wr,Ie.right),u=Math.min(nt,Ie.bottom);return Math.max(0,(ot-at)*(u-it))},we=function(){Ce=D.y+M,Le=Ce+F,xe=D.x+T,Ae=xe+A};var k,b,d=t,x=d.ownerDocument,V=br(d),G=V.getComputedStyle(d),X=G.width,p=G.height,B=G.position,W=d.style.left,he=d.style.top,ge=d.style.right,ue=d.style.bottom,q=H(H({},a[n]),o),$=x.createElement("div");(k=d.parentElement)===null||k===void 0||k.appendChild($),$.style.left="".concat(d.offsetLeft,"px"),$.style.top="".concat(d.offsetTop,"px"),$.style.position=B,$.style.height="".concat(d.offsetHeight,"px"),$.style.width="".concat(d.offsetWidth,"px"),d.style.left="0",d.style.top="0",d.style.right="auto",d.style.bottom="auto";var N;if(Array.isArray(r))N={x:r[0],y:r[1],width:0,height:0};else{var U=r.getBoundingClientRect();N={x:U.x,y:U.y,width:U.width,height:U.height}}var D=d.getBoundingClientRect(),j=x.documentElement,tr=j.clientWidth,ee=j.clientHeight,nr=j.scrollWidth,Ge=j.scrollHeight,le=j.scrollTop,Ue=j.scrollLeft,F=D.height,A=D.width,re=N.height,se=N.width,je={left:0,top:0,right:tr,bottom:ee},Qe={left:-Ue,top:-le,right:nr-Ue,bottom:Ge-le},ye=q.htmlRegion,Q="visible",Je="visibleFirst";ye!=="scroll"&&ye!==Je&&(ye=Q);var te=ye===Je,Se=Et(Qe,S),C=Et(je,S),Ke=ye===Q?C:Se,be=te?C:Ke;d.style.left="auto",d.style.top="auto",d.style.right="0",d.style.bottom="0";var ce=d.getBoundingClientRect();d.style.left=W,d.style.top=he,d.style.right=ge,d.style.bottom=ue,(b=d.parentElement)===null||b===void 0||b.removeChild($);var _e=Sr(Math.round(A/parseFloat(X)*1e3)/1e3),$e=Sr(Math.round(F/parseFloat(p)*1e3)/1e3);if(_e===0||$e===0||st(r)&&!Vt(r))return;var qr=q.offset,Nr=q.targetOffset,ne=kt(D,qr),Cr=w(ne,2),ae=Cr[0],ie=Cr[1],Mr=kt(N,Nr),oe=w(Mr,2),Gr=oe[0],Ur=oe[1];N.x-=Gr,N.y-=Ur;var Ze=q.points||[],J=w(Ze,2),Ee=J[0],jr=J[1],Ne=Dt(jr),K=Dt(Ee),wr=er(N,Ne),ar=er(D,K),Pe=H({},q),T=wr.x-ar.x+ae,M=wr.y-ar.y+ie,ve=O(T,M),fe=O(T,M,C),ir=er(N,["t","l"]),or=er(D,["t","l"]),ur=er(N,["b","r"]),Y=er(D,["b","r"]),Xe=q.overflow||{},Er=Xe.adjustX,lr=Xe.adjustY,sr=Xe.shiftX,Pr=Xe.shiftY,cr=function(qe){return typeof qe=="boolean"?qe:qe>=0},Ce,Le,xe,Ae;we();var vr=cr(lr),kr=K[0]===Ne[0];if(vr&&K[0]==="t"&&(Le>be.bottom||f.current.bt)){var de=M;kr?de-=F-re:de=ir.y-Y.y-ie;var Dr=O(T,de),Z=O(T,de,C);Dr>ve||Dr===ve&&(!te||Z>=fe)?(f.current.bt=!0,M=de,ie=-ie,Pe.points=[Re(K,0),Re(Ne,0)]):f.current.bt=!1}if(vr&&K[0]==="b"&&(Ce<be.top||f.current.tb)){var Be=M;kr?Be+=F-re:Be=ur.y-or.y-ie;var Ir=O(T,Be),Qr=O(T,Be,C);Ir>ve||Ir===ve&&(!te||Qr>=fe)?(f.current.tb=!0,M=Be,ie=-ie,Pe.points=[Re(K,0),Re(Ne,0)]):f.current.tb=!1}var Rr=cr(Er),Tr=K[1]===Ne[1];if(Rr&&K[1]==="l"&&(Ae>be.right||f.current.rl)){var We=T;Tr?We-=A-se:We=ir.x-Y.x-ae;var _r=O(We,M),Jr=O(We,M,C);_r>ve||_r===ve&&(!te||Jr>=fe)?(f.current.rl=!0,T=We,ae=-ae,Pe.points=[Re(K,1),Re(Ne,1)]):f.current.rl=!1}if(Rr&&K[1]==="r"&&(xe<be.left||f.current.lr)){var Fe=T;Tr?Fe+=A-se:Fe=ur.x-or.x-ae;var ze=O(Fe,M),fr=O(Fe,M,C);ze>ve||ze===ve&&(!te||fr>=fe)?(f.current.lr=!0,T=Fe,ae=-ae,Pe.points=[Re(K,1),Re(Ne,1)]):f.current.lr=!1}we();var He=sr===!0?0:sr;typeof He=="number"&&(xe<C.left&&(T-=xe-C.left-ae,N.x+se<C.left+He&&(T+=N.x-C.left+se-He)),Ae>C.right&&(T-=Ae-C.right-ae,N.x>C.right-He&&(T+=N.x-C.right+He)));var ke=Pr===!0?0:Pr;typeof ke=="number"&&(Ce<C.top&&(M-=Ce-C.top-ie,N.y+re<C.top+ke&&(M+=N.y-C.top+re-ke)),Le>C.bottom&&(M-=Le-C.bottom-ie,N.y>C.bottom-ke&&(M+=N.y-C.bottom+ke)));var De=D.x+T,Ve=De+A,Ye=D.y+M,Oe=Ye+F,Me=N.x,Kr=Me+se,$r=N.y,Zr=$r+re,Lr=Math.max(De,Me),Xr=Math.min(Ve,Kr),Yr=(Lr+Xr)/2,Or=Yr-De,xr=Math.max(Ye,$r),pr=Math.min(Oe,Zr),et=(xr+pr)/2,Ar=et-Ye;l==null||l(t,Pe);var rt=ce.right-D.x-(T+D.width),tt=ce.bottom-D.y-(M+D.height);g({ready:!0,offsetX:T/_e,offsetY:M/$e,offsetR:rt/_e,offsetB:tt/$e,arrowX:Or/_e,arrowY:Ar/$e,scaleX:_e,scaleY:$e,align:Pe})}}),P=function(){v.current+=1;var b=v.current;Promise.resolve().then(function(){v.current===b&&E()})},_=function(){g(function(b){return H(H({},b),{},{ready:!1})})};return z(_,[n]),z(function(){e||_()},[e]),[c.ready,c.offsetX,c.offsetY,c.offsetR,c.offsetB,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,P]}function nn(e,t,r,n,a){z(function(){if(e&&t&&r){let v=function(){n(),a()};var o=t,l=r,s=vt(o),m=vt(l),c=br(l),g=new Set([c].concat(lt(s),lt(m)));return g.forEach(function(S){S.addEventListener("scroll",v,{passive:!0})}),c.addEventListener("resize",v,{passive:!0}),n(),function(){g.forEach(function(S){S.removeEventListener("scroll",v),c.removeEventListener("resize",v)})}}},[e,t,r])}function an(e,t,r,n,a,o,l,s){var m=i.useRef(e),c=i.useRef(!1);m.current!==e&&(c.current=!0,m.current=e),i.useEffect(function(){var g=yt(function(){c.current=!1});return function(){yt.cancel(g)}},[e]),i.useEffect(function(){if(t&&n&&(!a||o)){var g=function(){var V=!1,G=function(B){var W=B.target;V=l(W)},X=function(B){var W=B.target;!c.current&&m.current&&!V&&!l(W)&&s(!1)};return[G,X]},v=g(),S=w(v,2),f=S[0],y=S[1],E=g(),P=w(E,2),_=P[0],k=P[1],b=br(n);b.addEventListener("mousedown",f,!0),b.addEventListener("click",y,!0),b.addEventListener("contextmenu",y,!0);var d=ct(r);return d&&(d.addEventListener("mousedown",_,!0),d.addEventListener("click",k,!0),d.addEventListener("contextmenu",k,!0)),function(){b.removeEventListener("mousedown",f,!0),b.removeEventListener("click",y,!0),b.removeEventListener("contextmenu",y,!0),d&&(d.removeEventListener("mousedown",_,!0),d.removeEventListener("click",k,!0),d.removeEventListener("contextmenu",k,!0))}}},[t,r,n,a,o])}function on(e){var t=e.prefixCls,r=e.align,n=e.arrow,a=e.arrowPos,o=n||{},l=o.className,s=o.content,m=a.x,c=m===void 0?0:m,g=a.y,v=g===void 0?0:g,S=i.useRef();if(!r||!r.points)return null;var f={position:"absolute"};if(r.autoArrow!==!1){var y=r.points[0],E=r.points[1],P=y[0],_=y[1],k=E[0],b=E[1];P===k||!["t","b"].includes(P)?f.top=v:P==="t"?f.top=0:f.bottom=0,_===b||!["l","r"].includes(_)?f.left=c:_==="l"?f.left=0:f.right=0}return i.createElement("div",{ref:S,className:rr("".concat(t,"-arrow"),l),style:f},s)}function un(e){var t=e.prefixCls,r=e.open,n=e.zIndex,a=e.mask,o=e.motion;return a?i.createElement($t,gr({},o,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(l){var s=l.className;return i.createElement("div",{style:{zIndex:n},className:rr("".concat(t,"-mask"),s)})}):null}var ln=i.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),sn=i.forwardRef(function(e,t){var r=e.popup,n=e.className,a=e.prefixCls,o=e.style,l=e.target,s=e.onVisibleChanged,m=e.open,c=e.keepDom,g=e.fresh,v=e.onClick,S=e.mask,f=e.arrow,y=e.arrowPos,E=e.align,P=e.motion,_=e.maskMotion,k=e.forceRender,b=e.getPopupContainer,d=e.autoDestroy,x=e.portal,V=e.zIndex,G=e.onMouseEnter,X=e.onMouseLeave,p=e.onPointerEnter,B=e.ready,W=e.offsetX,he=e.offsetY,ge=e.offsetR,ue=e.offsetB,q=e.onAlign,$=e.onPrepare,N=e.stretch,U=e.targetWidth,D=e.targetHeight,j=typeof r=="function"?r():r,tr=m||c,ee=(b==null?void 0:b.length)>0,nr=i.useState(!b||!ee),Ge=w(nr,2),le=Ge[0],Ue=Ge[1];if(z(function(){!le&&ee&&l&&Ue(!0)},[le,ee,l]),!le)return null;var F="auto",A={left:"-1000vw",top:"-1000vh",right:F,bottom:F};if(B||!m){var re,se=E.points,je=E.dynamicInset||((re=E._experimental)===null||re===void 0?void 0:re.dynamicInset),Qe=je&&se[0][1]==="r",ye=je&&se[0][0]==="b";Qe?(A.right=ge,A.left=F):(A.left=W,A.right=F),ye?(A.bottom=ue,A.top=F):(A.top=he,A.bottom=F)}var Q={};return N&&(N.includes("height")&&D?Q.height=D:N.includes("minHeight")&&D&&(Q.minHeight=D),N.includes("width")&&U?Q.width=U:N.includes("minWidth")&&U&&(Q.minWidth=U)),m||(Q.pointerEvents="none"),i.createElement(x,{open:k||tr,getContainer:b&&function(){return b(l)},autoDestroy:d},i.createElement(un,{prefixCls:a,open:m,zIndex:V,mask:S,motion:_}),i.createElement(_t,{onResize:q,disabled:!m},function(Je){return i.createElement($t,gr({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:k,leavedClassName:"".concat(a,"-hidden")},P,{onAppearPrepare:$,onEnterPrepare:$,visible:m,onVisibleChanged:function(Se){var C;P==null||(C=P.onVisibleChanged)===null||C===void 0||C.call(P,Se),s(Se)}}),function(te,Se){var C=te.className,Ke=te.style,be=rr(a,C,n);return i.createElement("div",{ref:qt(Je,t,Se),className:be,style:H(H(H(H({"--arrow-x":"".concat(y.x||0,"px"),"--arrow-y":"".concat(y.y||0,"px")},A),Q),Ke),{},{boxSizing:"border-box",zIndex:V},o),onMouseEnter:G,onMouseLeave:X,onPointerEnter:p,onClick:v},f&&i.createElement(on,{prefixCls:a,arrow:f,arrowPos:y,align:E}),i.createElement(ln,{cache:!m&&!g},j))})}))}),cn=i.forwardRef(function(e,t){var r=e.children,n=e.getTriggerDOMNode,a=Vr(r),o=i.useCallback(function(s){Gt(t,n?n(s):s)},[n]),l=Tt(o,r.ref);return a?i.cloneElement(r,{ref:l}):r}),vn=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function fn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xt,t=i.forwardRef(function(r,n){var a=r.prefixCls,o=a===void 0?"rc-trigger-popup":a,l=r.children,s=r.action,m=s===void 0?"hover":s,c=r.showAction,g=r.hideAction,v=r.popupVisible,S=r.defaultPopupVisible,f=r.onPopupVisibleChange,y=r.afterPopupVisibleChange,E=r.mouseEnterDelay,P=r.mouseLeaveDelay,_=P===void 0?.1:P,k=r.focusDelay,b=r.blurDelay,d=r.mask,x=r.maskClosable,V=x===void 0?!0:x,G=r.getPopupContainer,X=r.forceRender,p=r.autoDestroy,B=r.destroyPopupOnHide,W=r.popup,he=r.popupClassName,ge=r.popupStyle,ue=r.popupPlacement,q=r.builtinPlacements,$=q===void 0?{}:q,N=r.popupAlign,U=r.zIndex,D=r.stretch,j=r.getPopupClassNameFromAlign,tr=r.fresh,ee=r.alignPoint,nr=r.onPopupClick,Ge=r.onPopupAlign,le=r.arrow,Ue=r.popupMotion,F=r.maskMotion,A=r.popupTransitionName,re=r.popupAnimation,se=r.maskTransitionName,je=r.maskAnimation,Qe=r.className,ye=r.getTriggerDOMNode,Q=Ft(r,vn),Je=p||B||!1,te=i.useState(!1),Se=w(te,2),C=Se[0],Ke=Se[1];z(function(){Ke(Ut())},[]);var be=i.useRef({}),ce=i.useContext(Ct),_e=i.useMemo(function(){return{registerSubPopup:function(h,I){be.current[h]=I,ce==null||ce.registerSubPopup(h,I)}}},[ce]),$e=jt(),qr=i.useState(null),Nr=w(qr,2),ne=Nr[0],Cr=Nr[1],ae=Te(function(u){st(u)&&ne!==u&&Cr(u),ce==null||ce.registerSubPopup($e,u)}),ie=i.useState(null),Mr=w(ie,2),oe=Mr[0],Gr=Mr[1],Ur=Te(function(u){st(u)&&oe!==u&&Gr(u)}),Ze=i.Children.only(l),J=(Ze==null?void 0:Ze.props)||{},Ee={},jr=Te(function(u){var h,I,L=oe;return(L==null?void 0:L.contains(u))||((h=ct(L))===null||h===void 0?void 0:h.host)===u||u===L||(ne==null?void 0:ne.contains(u))||((I=ct(ne))===null||I===void 0?void 0:I.host)===u||u===ne||Object.values(be.current).some(function(R){return(R==null?void 0:R.contains(u))||u===R})}),Ne=wt(o,Ue,re,A),K=wt(o,F,je,se),wr=i.useState(S||!1),ar=w(wr,2),Pe=ar[0],T=ar[1],M=v??Pe,ve=Te(function(u){v===void 0&&T(u)});z(function(){T(v||!1)},[v]);var fe=i.useRef(M);fe.current=M;var ir=Te(function(u){dt.flushSync(function(){M!==u&&(ve(u),f==null||f(u))})}),or=i.useRef(),ur=function(){clearTimeout(or.current)},Y=function(h){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ur(),I===0?ir(h):or.current=setTimeout(function(){ir(h)},I*1e3)};i.useEffect(function(){return ur},[]);var Xe=i.useState(!1),Er=w(Xe,2),lr=Er[0],sr=Er[1];z(function(u){(!u||M)&&sr(!0)},[M]);var Pr=i.useState(null),cr=w(Pr,2),Ce=cr[0],Le=cr[1],xe=i.useState([0,0]),Ae=w(xe,2),vr=Ae[0],kr=Ae[1],de=function(h){kr([h.clientX,h.clientY])},Dr=tn(M,ne,ee?vr:oe,ue,$,N,Ge),Z=w(Dr,11),Be=Z[0],Ir=Z[1],Qr=Z[2],Rr=Z[3],Tr=Z[4],We=Z[5],_r=Z[6],Jr=Z[7],Fe=Z[8],ze=Z[9],fr=Z[10],He=pt(C,m,c,g),ke=w(He,2),De=ke[0],Ve=ke[1],Ye=De.has("click"),Oe=Ve.has("click")||Ve.has("contextMenu"),Me=Te(function(){lr||fr()}),Kr=function(){fe.current&&ee&&Oe&&Y(!1)};nn(M,oe,ne,Me,Kr),z(function(){Me()},[vr,ue]),z(function(){M&&!($!=null&&$[ue])&&Me()},[JSON.stringify(N)]);var $r=i.useMemo(function(){var u=rn($,o,ze,ee);return rr(u,j==null?void 0:j(ze))},[ze,j,$,o,ee]);i.useImperativeHandle(n,function(){return{forceAlign:Me}});var Zr=i.useState(0),Lr=w(Zr,2),Xr=Lr[0],Yr=Lr[1],Or=i.useState(0),xr=w(Or,2),pr=xr[0],et=xr[1],Ar=function(){if(D&&oe){var h=oe.getBoundingClientRect();Yr(h.width),et(h.height)}},rt=function(){Ar(),Me()},tt=function(h){sr(!1),fr(),y==null||y(h)},O=function(){return new Promise(function(h){Ar(),Le(function(){return h})})};z(function(){Ce&&(fr(),Ce(),Le(null))},[Ce]);function we(u,h,I,L){Ee[u]=function(R){var Fr;L==null||L(R),Y(h,I);for(var ut=arguments.length,ht=new Array(ut>1?ut-1:0),zr=1;zr<ut;zr++)ht[zr-1]=arguments[zr];(Fr=J[u])===null||Fr===void 0||Fr.call.apply(Fr,[J,R].concat(ht))}}(Ye||Oe)&&(Ee.onClick=function(u){var h;fe.current&&Oe?Y(!1):!fe.current&&Ye&&(de(u),Y(!0));for(var I=arguments.length,L=new Array(I>1?I-1:0),R=1;R<I;R++)L[R-1]=arguments[R];(h=J.onClick)===null||h===void 0||h.call.apply(h,[J,u].concat(L))}),an(M,Oe,oe,ne,d,V,jr,Y);var Br=De.has("hover"),qe=Ve.has("hover"),Ie,dr;Br&&(we("onMouseEnter",!0,E,function(u){de(u)}),we("onPointerEnter",!0,E,function(u){de(u)}),Ie=function(){(M||lr)&&Y(!0,E)},ee&&(Ee.onMouseMove=function(u){var h;(h=J.onMouseMove)===null||h===void 0||h.call(J,u)})),qe&&(we("onMouseLeave",!1,_),we("onPointerLeave",!1,_),dr=function(){Y(!1,_)}),De.has("focus")&&we("onFocus",!0,k),Ve.has("focus")&&we("onBlur",!1,b),De.has("contextMenu")&&(Ee.onContextMenu=function(u){var h;fe.current&&Ve.has("contextMenu")?Y(!1):(de(u),Y(!0)),u.preventDefault();for(var I=arguments.length,L=new Array(I>1?I-1:0),R=1;R<I;R++)L[R-1]=arguments[R];(h=J.onContextMenu)===null||h===void 0||h.call.apply(h,[J,u].concat(L))}),Qe&&(Ee.className=rr(J.className,Qe));var pe=H(H({},J),Ee),Wr={},nt=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];nt.forEach(function(u){Q[u]&&(Wr[u]=function(){for(var h,I=arguments.length,L=new Array(I),R=0;R<I;R++)L[R]=arguments[R];(h=pe[u])===null||h===void 0||h.call.apply(h,[pe].concat(L)),Q[u].apply(Q,L)})});var at=i.cloneElement(Ze,H(H({},pe),Wr)),it={x:We,y:_r},ot=le?H({},le!==!0?le:{}):null;return i.createElement(i.Fragment,null,i.createElement(_t,{disabled:!M,ref:Ur,onResize:rt},i.createElement(cn,{getTriggerDOMNode:ye},at)),i.createElement(Ct.Provider,{value:_e},i.createElement(sn,{portal:e,ref:ae,prefixCls:o,popup:W,className:rr(he,$r),style:ge,target:oe,onMouseEnter:Ie,onMouseLeave:dr,onPointerEnter:Ie,zIndex:U,open:M,keepDom:lr,fresh:tr,onClick:nr,mask:d,motion:Ne,maskMotion:K,onVisibleChanged:tt,onPrepare:O,forceRender:X,autoDestroy:Je,getPopupContainer:G,align:ze,arrow:ot,arrowPos:it,ready:Be,offsetX:Ir,offsetY:Qr,offsetR:Rr,offsetB:Tr,onAlign:Me,stretch:D,targetWidth:Xr/Jr,targetHeight:pr/Fe})))});return t}const En=fn(xt);function ft(){return typeof BigInt=="function"}function At(e){return!e&&e!==0&&!Number.isNaN(e)||!String(e).trim()}function yr(e){var t=e.trim(),r=t.startsWith("-");r&&(t=t.slice(1)),t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),t.startsWith(".")&&(t="0".concat(t));var n=t||"0",a=n.split("."),o=a[0]||"0",l=a[1]||"0";o==="0"&&l==="0"&&(r=!1);var s=r?"-":"";return{negative:r,negativeStr:s,trimStr:n,integerStr:o,decimalStr:l,fullStr:"".concat(s).concat(n)}}function mt(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function hr(e){var t=String(e);if(mt(e)){var r=Number(t.slice(t.indexOf("e-")+2)),n=t.match(/\.(\d+)/);return n!=null&&n[1]&&(r+=n[1].length),r}return t.includes(".")&&Wt(t)?t.length-t.indexOf(".")-1:0}function Bt(e){var t=String(e);if(mt(e)){if(e>Number.MAX_SAFE_INTEGER)return String(ft()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(ft()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(hr(t))}return yr(t).fullStr}function Wt(e){return typeof e=="number"?!Number.isNaN(e):e?/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e):!1}var dn=function(){function e(t){if(Rt(this,e),me(this,"origin",""),me(this,"negative",void 0),me(this,"integer",void 0),me(this,"decimal",void 0),me(this,"decimalLen",void 0),me(this,"empty",void 0),me(this,"nan",void 0),At(t)){this.empty=!0;return}if(this.origin=String(t),t==="-"||Number.isNaN(t)){this.nan=!0;return}var r=t;if(mt(r)&&(r=Number(r)),r=typeof r=="string"?r:Bt(r),Wt(r)){var n=yr(r);this.negative=n.negative;var a=n.trimStr.split(".");this.integer=BigInt(a[0]);var o=a[1]||"0";this.decimal=BigInt(o),this.decimalLen=o.length}else this.nan=!0}return It(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(r){var n="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(r,"0"));return BigInt(n)}},{key:"negate",value:function(){var r=new e(this.toString());return r.negative=!r.negative,r}},{key:"cal",value:function(r,n,a){var o=Math.max(this.getDecimalStr().length,r.getDecimalStr().length),l=this.alignDecimal(o),s=r.alignDecimal(o),m=n(l,s).toString(),c=a(o),g=yr(m),v=g.negativeStr,S=g.trimStr,f="".concat(v).concat(S.padStart(c+1,"0"));return new e("".concat(f.slice(0,-c),".").concat(f.slice(-c)))}},{key:"add",value:function(r){if(this.isInvalidate())return new e(r);var n=new e(r);return n.isInvalidate()?this:this.cal(n,function(a,o){return a+o},function(a){return a})}},{key:"multi",value:function(r){var n=new e(r);return this.isInvalidate()||n.isInvalidate()?new e(NaN):this.cal(n,function(a,o){return a*o},function(a){return a*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toString()===(r==null?void 0:r.toString())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":yr("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}(),mn=function(){function e(t){if(Rt(this,e),me(this,"origin",""),me(this,"number",void 0),me(this,"empty",void 0),At(t)){this.empty=!0;return}this.origin=String(t),this.number=Number(t)}return It(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(r){if(this.isInvalidate())return new e(r);var n=Number(r);if(Number.isNaN(n))return this;var a=this.number+n;if(a>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var o=Math.max(hr(this.number),hr(n));return new e(a.toFixed(o))}},{key:"multi",value:function(r){var n=Number(r);if(this.isInvalidate()||Number.isNaN(n))return new e(NaN);var a=this.number*n;if(a>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var o=Math.max(hr(this.number),hr(n));return new e(a.toFixed(o))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toNumber()===(r==null?void 0:r.toNumber())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":Bt(this.number):this.origin}}]),e}();function hn(e){return ft()?new dn(e):new mn(e)}function gn(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e==="")return"";var a=yr(e),o=a.negativeStr,l=a.integerStr,s=a.decimalStr,m="".concat(t).concat(s),c="".concat(o).concat(l);if(r>=0){var g=Number(s[r]);if(g>=5&&!n){var v=hn(e).add("".concat(o,"0.").concat("0".repeat(r)).concat(10-g));return gn(v.toString(),t,r,n)}return r===0?c:"".concat(c).concat(t).concat(s.padEnd(r,"0").slice(0,r))}return m===".0"?c:"".concat(c).concat(m)}function Pn(e){var t=i.createContext(void 0),r=function(a){var o=a.value,l=a.children,s=i.useRef(o);s.current=o;var m=i.useState(function(){return{getValue:function(){return s.current},listeners:new Set}}),c=w(m,1),g=c[0];return z(function(){dt.unstable_batchedUpdates(function(){g.listeners.forEach(function(v){v(o)})})},[o]),i.createElement(t.Provider,{value:g},l)};return{Context:t,Provider:r,defaultValue:e}}function kn(e,t){var r=Te(typeof t=="function"?t:function(v){if(t===void 0)return v;if(!Array.isArray(t))return v[t];var S={};return t.forEach(function(f){S[f]=v[f]}),S}),n=i.useContext(e==null?void 0:e.Context),a=n||{},o=a.listeners,l=a.getValue,s=i.useRef();s.current=r(n?l():e==null?void 0:e.defaultValue);var m=i.useState({}),c=w(m,2),g=c[1];return z(function(){if(!n)return;function v(S){var f=r(S);Qt(s.current,f,!0)||g({})}return o.add(v),function(){o.delete(v)}},[n]),s.current}function Dn(){var e=i.createContext(null);function t(){return i.useContext(e)}function r(a,o){var l=Vr(a),s=function(c,g){var v=l?{ref:g}:{},S=i.useRef(0),f=i.useRef(c),y=t();return y!==null?i.createElement(a,gr({},c,v)):((!o||o(f.current,c))&&(S.current+=1),f.current=c,i.createElement(e.Provider,{value:S.current},i.createElement(a,gr({},c,v))))};return l?i.forwardRef(s):s}function n(a,o){var l=Vr(a),s=function(c,g){var v=l?{ref:g}:{};return t(),i.createElement(a,gr({},c,v))};return l?i.memo(i.forwardRef(s),o):i.memo(s,o)}return{makeImmutable:r,responseImmutable:n,useImmutableMark:t}}export{xt as P,En as T,hr as a,gn as b,Dn as c,Pn as d,hn as g,Bt as n,yr as t,kn as u,Wt as v};
